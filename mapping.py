import json

# 증상 카테고리별 증상 리스트
category_mapping = {
    "뼈": ["뼈_건강", "골다공증_예방", "뼈_통증", "성장기", "골절"],
    "근골격": ["근육_기능", "근육_약화", "근육_경련", "부정맥", "생리통", "관절통", "관절염"],
    "뇌": ["기억력", "집중력_향상", "신경_발달", "인지력_저하", "알츠하이머"],
    "눈": ["눈떨림", "시력_저하", "안구건조", "야맹증"],
    "손떨림": ["파킨슨_예방", "신경_이상"],
    "신경": ["우울증", "신경통", "에너지_대사", "만성_피로", "말초신경손상"],
    "정신건강": ["불안", "불면", "기분변화", "공황"],
    "혈액": ["빈혈", "창백_피부", "두통", "호흡곤란", "피"],
    "순환기": ["혈액_순환", "심혈관", "고혈압", "고지혈증"],
    "갑상선": ["갑상선_기능", "체중", "추위", "민감성", "피로"],
    "호르몬": ["생리", "월경_주기", "생식", "정자_건강", "PMS"],
    "면역력": ["면역력_저하", "감염_저항성", "상처_회복"],
    "항산화": ["항산화_작용", "세포_손상", "노화"],
    "피부": ["피부_트러블", "피부_건조", "피부_노화", "피부_탄력", "여드름", "기미"],
    "모발": ["모발_건강", "탈모", "머리카락_가늘어짐"],
    "손발톱": ["점막_건조", "입술_갈라짐", "손톱", "손톱_갈라짐"],
    "수면": ["수면장애", "불면", "수면_질"],
    "스트레스": ["스트레스_완화", "우울감", "정신적_피로", "피로"],
    "임신": ["산모_건강", "임신_필수_미네랄", "비타민", "입덧", "태아_기형_예방"],
    "태아": ["태아_발달", "신경_발달", "두뇌_발달"],
    "소화": ["소화불량", "위산과다", "장_건강", "변비"],
}

# 카테고리별 추천 성분
category_to_supplement = {
    "뼈": ["칼슘", "비타민 D", "비타민 K2", "마그네슘", "보론"],
    "근골격": ["마그네슘", "비타민 D", "오메가3", "글루코사민", "MSM"],
    "뇌": ["콜린", "비타민 B군", "오메가3", "포스파티딜세린", "아세틸-L-카르니틴"],
    "눈": ["마그네슘", "비타민 A", "루테인", "제아잔틴", "오메가3"],
    "손떨림": ["비타민 B1", "비타민 B6", "마그네슘"],
    "신경": ["비타민 B군", "요오드", "오메가3", "알파 리포산", "마그네슘"],
    "정신건강": ["마그네슘", "L-테아닌", "아슈와간다", "비타민 D", "오메가3"],
    "혈액": ["철분", "비타민 B12", "엽산", "비타민 C", "구리"],
    "순환기": ["코엔자임Q10", "오메가3", "마그네슘", "비타민 E", "폴리코사놀"],
    "갑상선": ["요오드", "셀레늄", "아연", "비타민 D"],
    "호르몬": ["비타민 B6", "아연", "감마 리놀렌산(GLA)", "비타민 E"],
    "면역력": ["아연", "비타민 C", "비타민 D", "셀레늄", "프로폴리스"],
    "항산화": ["비타민 E", "셀레늄", "비타민 C", "코엔자임Q10"],
    "피부": ["비오틴", "콜라겐", "비타민 A", "비타민 C", "아연", "MSM"],
    "모발": ["비오틴", "아연", "L-시스틴", "MSM", "비타민 D"],
    "손발톱": ["비오틴", "아연", "실리카", "비타민 B군"],
    "수면": ["마그네슘", "멜라토닌", "L-테아닌", "글리신"],
    "스트레스": ["마그네슘", "비타민 B군", "아슈와간다", "L-테아닌"],
    "임신": ["엽산", "철분", "비타민 D", "비타민 B6", "DHA"],
    "태아": ["엽산", "오메가3", "콜린", "비타민 D"],
    "소화": ["유산균", "아연 카르노신", "글루타민", "소화효소"]
}

# 카테고리별 피해야 할 성분
category_to_avoid = {
    "모발": ["판토텐산"],
    "수면": ["카페인"],
    "피부": ["설탕", "트랜스지방"],
    "신경": ["카페인", "알코올"],
    "스트레스": ["카페인", "설탕"],
    "소화": ["지방", "알코올", "카페인"],
    "심혈관": ["나트륨", "트랜스지방"],
    "갑상선": ["콩", "브로콜리"],
    "우울증": ["알코올", "설탕"]
}

# ----------- 딕셔너리 생성 -----------

symptom_to_supplements = {}
symptom_to_avoid = {}

for category, symptoms in category_mapping.items():
    supps = category_to_supplement.get(category, [])
    avoids = category_to_avoid.get(category, [])
    for symptom in symptoms:
        symptom_to_supplements[symptom] = supps
        symptom_to_avoid[symptom] = avoids

# ----------- 저장 -----------

with open('./knowledge/mapping.json', 'w', encoding='utf-8') as f:
    json.dump(symptom_to_supplements, f, ensure_ascii=False, indent=2)

with open('./knowledge/avoid_mapping.json', 'w', encoding='utf-8') as f:
    json.dump(symptom_to_avoid, f, ensure_ascii=False, indent=2)

print("✅ mapping.json / avoid_mapping.json 생성 완료!")
